<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/synth/blog/rss.xml" title="Synth - Documentation Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/synth/blog/atom.xml" title="Synth - Documentation Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Synth - Documentation" href="/synth/opensearch.xml">
<script defer="defer" src="https://cdn.usefathom.com/script.js" spa="auto" site="ASXTKXUJ"></script><title data-react-helmet="true">Posts tagged &quot;testing&quot; | Synth - Blog</title><meta data-react-helmet="true" property="og:title" content="Posts tagged &quot;testing&quot; | Synth - Blog"><meta data-react-helmet="true" name="description" content="Blog | Tagged &quot;testing&quot;"><meta data-react-helmet="true" property="og:description" content="Blog | Tagged &quot;testing&quot;"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:image" content="https://storage.googleapis.com/getsynth-public/media/api.jpg"><meta data-react-helmet="true" name="twitter:image" content="https://storage.googleapis.com/getsynth-public/media/api.jpg"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for So you want to mock an API"><link data-react-helmet="true" rel="shortcut icon" href="/synth/img/getsynth_favicon.png"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/synth/styles.126caade.css">
<link rel="preload" href="/synth/styles.757b73be.js" as="script">
<link rel="preload" href="/synth/runtime~main.b7cf6161.js" as="script">
<link rel="preload" href="/synth/main.7611f22a.js" as="script">
<link rel="preload" href="/synth/1.3bd11b34.js" as="script">
<link rel="preload" href="/synth/2.26018857.js" as="script">
<link rel="preload" href="/synth/3.64a93aa7.js" as="script">
<link rel="preload" href="/synth/01a85c17.057161ab.js" as="script">
<link rel="preload" href="/synth/71.5f3e08c3.js" as="script">
<link rel="preload" href="/synth/6875c492.d1024bee.js" as="script">
<link rel="preload" href="/synth/a6aa9e1f.91051dea.js" as="script">
<link rel="preload" href="/synth/b4f94a6c.58d22c3c.js" as="script">
<link rel="preload" href="/synth/ccc49370.7e7f58ec.js" as="script">
<link rel="preload" href="/synth/5992cf76.87098209.js" as="script">
<link rel="preload" href="/synth/85075376.fa7ea14b.js" as="script">
<link rel="preload" href="/synth/ae4c376e.f1b28286.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a href="https://getsynth.com" target="_self" rel="noopener noreferrer" class="navbar__brand"><img src="/synth/img/getsynth_identicon.png" alt="Synth" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/synth/img/getsynth_identicon.png" alt="Synth" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Synth</strong></a><a class="navbar__item navbar__link" href="/synth/getting_started/synth">Getting Started</a><a class="navbar__item navbar__link" href="/synth/examples/bank">Examples</a><a class="navbar__item navbar__link" href="/synth/content/null">Generators</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/synth/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/getsynth/synth" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a href="https://getsynth.com" target="_self" rel="noopener noreferrer" class="navbar__brand"><img src="/synth/img/getsynth_identicon.png" alt="Synth" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/synth/img/getsynth_identicon.png" alt="Synth" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Synth</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/synth/getting_started/synth">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/synth/examples/bank">Examples</a></li><li class="menu__list-item"><a class="menu__link" href="/synth/content/null">Generators</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/synth/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/getsynth/synth" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--2"><div class="sidebar_SWld thin-scrollbar"><h3 class="sidebarItemTitle_Km2m">Recent posts</h3><ul class="sidebarItemList_3UpA"><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/synth/blog/2021/09/07/mocking-a-production-api">So you want to mock an API</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/synth/blog/2021/08/31/seeding-databases-tutorial">Seeding test databases in 2021 - best practices</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/synth/blog/2021/08/09/macro">Complex Procedural Rust Macros</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/synth/blog/2021/08/04/test-data">Why not to use prod data for testing - and what to do instead</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/synth/blog/2021/03/09/postgres-data-gen">How to Create PostgreSQL Test Data</a></li></ul></div></div><main class="col col--8"><h1>1 post tagged with &quot;testing&quot;</h1><a href="/synth/blog/tags">View All Tags</a><div class="margin-vert--xl"><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_3-lP"><a href="/synth/blog/2021/09/07/mocking-a-production-api">So you want to mock an API</a></h2><div class="margin-vert--md"><time datetime="2021-09-07T00:00:00.000Z" class="blogPostDate_Ta7i">September 7, 2021  Â· 12 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/getsynth" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/u/14791384?s=460&amp;v=4" alt="Christos Hadjiaslanis"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/getsynth" target="_blank" rel="noreferrer noopener">Christos Hadjiaslanis</a></h4><small class="avatar__subtitle">Founder</small></div></div></header><section class="markdown"><p><img alt="So you want to mock an API" src="/synth/assets/images/api-67374e47b66511f4dc2d22baa8856a8a.jpg"></p><p>API mocking refers to the process of simulating the behaviour of a real API
using a fake replacement.</p><p>There are many great use-cases for API mocking. You may want to mock an API to
eliminate development dependencies between engineering teams. If for example a
service which is a dependency to your front-end isn&#x27;t ready - you may want a
placeholder which will unblock your front-end team.</p><p>API mocking is also a really powerful tool when doing integration tests against
3rd party APIs. This can be broken down roughly into functional and non-function
testing:</p><ul><li>Functional Testing: You care about the semantics of the API. It is important
to be able to make a request and get an appropriate response which takes your
request into account. Unfortunately API providers often have sub-par testing
environments which can make this a real pain.</li><li>Non-Functional Testing: You don&#x27;t really care about the semantics of the API.
This can be used to speed up integration tests as requests don&#x27;t need to
travel to the API providers servers. You may also want to verify your SLAs,
load test / stress test your systems etc. In this case being rate-limited by
the API provider&#x27;s testmode can be a limiting constraint.</li></ul><p>At <a href="https://getsynth.com" target="_blank" rel="noopener noreferrer">Synth</a>, we&#x27;re building a declarative data generator.
We wanted to apply our data generation engine to mocking a subset of a popular
API and see how far we could go. We set out to prototype a solution over (roughly)
5 days as a side project - this blog post is an overview of that journey.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="day-1-picking-an-api"></a>Day 1: Picking an API<a class="hash-link" href="#day-1-picking-an-api" title="Direct link to heading">#</a></h2><p>So much to do, so little time. We decided we wanted to mock a popular API
but didn&#x27;t know where to start. Companies like Stripe have an
excellent <a href="https://stripe.com/docs/testing" target="_blank" rel="noopener noreferrer">testmode</a> and even
an <a href="https://github.com/stripe/stripe-mock" target="_blank" rel="noopener noreferrer">open source http server</a> which you
can use instead.</p><p>We decided to ask the internet &#x27;Which API have you been struggling to test
against&#x27; on various forums like Reddit, HN and others. Ok so now we wait and see
let&#x27;s see what the internet has to say.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="day-2-choosing-shopify"></a>Day 2: Choosing Shopify<a class="hash-link" href="#day-2-choosing-shopify" title="Direct link to heading">#</a></h2><p>Lo and behold! the internet responded. A bunch of people responded and primarily
complained about payment processors (except for Stripe which was explicitly
praised yet again!). A few products and companies came up repeatedly as being
difficult to test against. We qualitatively evaluated the internet&#x27;s feedback
and reviewed documentation from the different APIs mentioned to understand
the implementation complexity. After all we had 3.5 days left, so we couldn&#x27;t
pick anything too complex. In the end we decided to go with the <a href="https://shopify.dev/api/" target="_blank" rel="noopener noreferrer">Shopify API</a>!</p><p>Just as a disclaimer we have absolutely no issues with Shopify, it just so
happens that a lot of the feedback we got pointed us that direction.</p><p>Now the Shopify API is pretty big - and we&#x27;re building a mock server POC from
scratch, so we decided to narrow down and try to mock a single endpoint
first. We chose
the <a href="https://shopify.dev/api/admin/rest/reference/events/event" target="_blank" rel="noopener noreferrer">Event API</a>
which seemed pretty straight forward. Looking at the Event API there are three
dimensions to consider when designing our POC solution.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="1-the-data-model"></a>1. The Data Model<a class="hash-link" href="#1-the-data-model" title="Direct link to heading">#</a></h3><p>The Event API returns a JSON payload which is a collection of Events. An example
Event can be seen below:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-json codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Refers to a certain event and its resources.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;arguments&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Ipod Nano - 8GB&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// A text field containing information about the event.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;body&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token null keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// The date and time (ISO 8601 format) when the event was created.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;created_at&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2015-04-20T08:33:57-11:00&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// The ID of the event.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">164748010</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// A human readable description of the event.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;desciption&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Received a new order&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// A relative URL to the resource the event is for, if applicable.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;path&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/admin/orders/406514653/transactions/#1145&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// A human readable description of the event. Can contain some HTML formatting.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;message&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Received a new order&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// The ID of the resource that generated the event.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;subject_id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">406514653</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// The type of the resource that generated the event.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;subject_type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Order&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// The type of event that occurred. </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;verb&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;confirmed&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><div class="buttonsBlock_1QLD"><button type="button" aria-label="Copy code to clipboard" class="codeButton_2n6w copyButton_1PCb">Copy</button></div></div></div><p>Off the bat it&#x27;s clear that there is some business logic that needs to be
implemented. For example, there is some notion of causality, i.e. an <code>Order</code>
cannot be <code>closed</code> before it&#x27;s been <code>placed</code>. This non-trivial business logic was
good news - it means we can showcase some complex data generation logic that&#x27;s
built into <a href="https://github.com/getsynth/synth" target="_blank" rel="noopener noreferrer">synth</a>.</p><p>Since we don&#x27;t have access to the code that runs the Shopify API, we have to
simulate the behaviour of the Event data model. There are varying degrees of
depth into which one can go, and we broke it into 4 levels:</p><ol><li>Level 1 - <strong>Stub</strong>: Level 1 is just about exposing an endpoint where the data
on a <em>per element</em> basis &#x27;looks&#x27; right. You have the correct types, but you
don&#x27;t really care about correctness across elements. For example, you care
that <code>path</code> has the correct <code>subject_id</code> in the URI, but you don&#x27;t care that
a given Order goes from <code>placed</code> to <code>closed</code> to <code>re_opened</code>etc...</li><li>Level 2 - <strong>Mock</strong>: Level 2 involves maintaining the semantics of the Events
<em>collection</em> as a whole. For example <code>created_at</code> should always increase
as <code>id</code> increases
(a larger <code>id</code> means an event was generated at a later date).
<code>verb</code>s should follow proper causality (as per the order example above). etc.</li><li>Level 3 - <strong>Emulate</strong>: Level 3 is about maintaining semantics <em>across
endpoints</em>. For example creating an order in a different Shopify API endpoint
should create an <code>order_placed</code> event in the Event API.</li><li>Level 4 - <strong>Simulate</strong>: Here you are basically reverse engineering all the
business logic of the API. It should be <em>indistinguishable</em> from the real
thing.</li></ol><p>Really these levels can be seen as increasing in scope as you simulate
semantics per-element, per-endpoint, cross-endpoint and finally for the entire
API.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2-the-endpoint-behaviour"></a>2. The Endpoint Behaviour<a class="hash-link" href="#2-the-endpoint-behaviour" title="Direct link to heading">#</a></h3><p>The Event API exposes 2 endpoints:</p><ul><li><code>GET /admin/api/2021-07/events.json</code> which retrieves a list of all events</li><li><code>GET /admin/api/2021-07/events/{event_id}.json</code> which retrieves a single even
by its ID.</li></ul><p>The first endpoint exposes various query parameters (which are basically
filters) which alter the response body:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-undefined codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">limit:          The number of results to show. (default: 50, maximum: 250)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">since_id:       Show only results after the specified ID.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">created_at_min: Show events created at or after this date and time. (format: 2014-04-25T16:15:47-04:00)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">created_at_max: Show events created at or before this date and time. (format: 2014-04-25T16:15:47-04:00)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">filter:         Show events specified in this filter.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">verb:           Show events of a certain type.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">fields:         Show only certain fields, specified by a comma-separated list of field names.</span></div></div></div><div class="buttonsBlock_1QLD"><button type="button" aria-label="Copy code to clipboard" class="codeButton_2n6w copyButton_1PCb">Copy</button></div></div></div><p>Luckily the filtering behaviour is simple, and as long as the implementation
stays true to the description in the docs it should be easy to emulate.</p><p>The second endpoint takes one query parameter which is a comma-separated list of
fields to return for a given event. Again should be easy enough.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="3-authentication"></a>3. Authentication<a class="hash-link" href="#3-authentication" title="Direct link to heading">#</a></h3><p>We decided not to touch authentication for now as the scope would blow up for a
5-day POC. Interestingly we got a bunch of feedback that mocking OAuth flows or
similar would be <em>really</em> useful, regardless of any specific API. We may come
back to this at a future date.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="day-3-evaluating-implementation-alternatives"></a>Day 3: Evaluating Implementation Alternatives<a class="hash-link" href="#day-3-evaluating-implementation-alternatives" title="Direct link to heading">#</a></h2><p>And then there was Day 3. We&#x27;d done our due diligence to pick a popular yet
underserved API, and we&#x27;d drilled down on how deep we could go in trying to
faithfully represent the implementation.</p><p>As any self-respecting engineer would do, we decided to scour the internet for
off-the-shelf solutions to automate as much of the grunt work as possible. Some
naive Googling brought up a mock server called
<a href="https://github.com/typicode/json-server" target="_blank" rel="noopener noreferrer">JSON server</a> - an API
automation solution which spins up a REST API for you given a data definition.
Excited by this we quickly wrote up 2 fake Event API events, and
started JSON server feeding it the fake events - and it worked!</p><p>Well almost; we were initially excited by the fact that it did exactly what is
said on the tin and very well, however it didn&#x27;t have an easy way to specify the
custom query parameters we needed to faithfully reproduce the API. For example
returning results before or after a given <code>created_at</code> timestamp (feel free to
let us know if we missed something here!).</p><p>So we needed something a little more sophisticated. The internet came to the
rescue again with a comprehensive
<a href="https://en.wikipedia.org/wiki/Comparison_of_API_simulation_tools" target="_blank" rel="noopener noreferrer">list</a> of API
simulation tools. The basic precondition we had was that the API simulator had
to be OSS with a permissive license we could build on. This immediately
disqualified 50% of the available solutions, and we did a divide and conquer
exercise quickly evaluating the rest.</p><p><img alt="Api Simulation Tools" src="/synth/assets/images/api-simulation-tools-c7de570989483d81b479120afad64cc8.png"></p><p>The remaining tools were either not built for this purpose, or they were
incredibly complex pieces of software that would take a while to get acquainted
with.</p><p>In the end we decided to implement the endpoint functionality ourselves - we
figured that a 50 LOC node/express server would do a fine job for a POC.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="day-4-implementing-the-core-functionality"></a>Day 4: Implementing the core functionality<a class="hash-link" href="#day-4-implementing-the-core-functionality" title="Direct link to heading">#</a></h2><p>Day 4 was the most straight forward. Let&#x27;s get this thing to work!</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="1-the-data-model-1"></a>1. The Data Model<a class="hash-link" href="#1-the-data-model-1" title="Direct link to heading">#</a></h3><p>We decided to reproduce the API at level 1-2 since we didn&#x27;t really have any
other endpoints. We used <a href="https://github.com/getsynth/synth" target="_blank" rel="noopener noreferrer">synth</a> to quickly
whip up
a <a href="https://github.com/getsynth/model-repository/blob/main/shopify/shopify/events.json.json" target="_blank" rel="noopener noreferrer">data model</a>
that generates data that looks like responses from the Event API. I won&#x27;t go
into depth on
how this works here as it&#x27;s been covered
in <a href="/synth/blog/2021/08/31/seeding-databases-tutorial">other posts</a>. In about 15
minutes of tweaking the <code>synth</code> schema, we generated ~10 Mb data that looks
like this:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-json codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">we had</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;arguments&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;generate virtual platforms&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;body&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token null keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;created_at&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2019-09-17T14:16:47&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;description&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Received new order&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">477306</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;message&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Received new order&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;path&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/admin/orders/83672/transactions/#6020&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;subject_id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1352997</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;subject_type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Order&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;verb&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;closed&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;arguments&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;innovate best-of-breed schemas&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;body&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token null keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;created_at&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2017-05-20T00:04:41&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;description&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Received new order&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">370051</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;message&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Received new order&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;path&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/admin/orders/82607/transactions/#9154&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;subject_id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1226112</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;subject_type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Order&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;verb&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;sale_pending&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;arguments&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;incentivize scalable mindshare&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;body&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token null keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;created_at&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2018-02-21T12:51:36&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;description&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Received new order&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">599084</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;message&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Received new order&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;path&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/admin/orders/01984/transactions/#3595&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;subject_id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1050540</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;subject_type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Order&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;verb&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;placed&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span></div></div></div><div class="buttonsBlock_1QLD"><button type="button" aria-label="Copy code to clipboard" class="codeButton_2n6w copyButton_1PCb">Copy</button></div></div></div><p>We then dumped it all in a MongoDB collection with the one-liner:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-bash codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ synth generate shopify --to mongodb://localhost:27017/shopify --size </span><span class="token number" style="color:rgb(247, 140, 108)">40000</span></div></div></div><div class="buttonsBlock_1QLD"><button type="button" aria-label="Copy code to clipboard" class="codeButton_2n6w copyButton_1PCb">Copy</button></div></div></div><p>Next step is to re-create the Event API endpoint.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2-creating-the-api"></a>2. Creating the API<a class="hash-link" href="#2-creating-the-api" title="Direct link to heading">#</a></h3><p>Creating the API was pretty straightforward. We wrote
a <a href="https://www.prisma.io/" target="_blank" rel="noopener noreferrer">prisma</a> <a href="https://github.com/getsynth/model-repository/blob/main/shopify/prisma/schema.prisma" target="_blank" rel="noopener noreferrer">model</a>
for the responses which basically worked out of the box with the data dumped
into MongoDB by <code>synth</code>. This gave us all the filtering we needed basically for
free.</p><p>Then we wrote a quick and dirty express server that maps the REST endpoint&#x27;s
querystrings into a query for prisma. The whole thing turned out to be ~90 LOC.
You can check the
source <a href="https://github.com/getsynth/model-repository/blob/main/shopify/src/bin.ts" target="_blank" rel="noopener noreferrer">here</a>
.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="day-5-packaging"></a>Day 5: Packaging<a class="hash-link" href="#day-5-packaging" title="Direct link to heading">#</a></h2><p><img alt="Docker" src="/synth/assets/images/docker-c542ea93652f9a10bce77fd9997e293a.jpg"></p><p>The data is ready, the API is ready, time to package this thing up and give it
to people to actually use. Let&#x27;s see if our experiment was a success.</p><p>While strategising about distributing our API, we were optimising for two
things:</p><ol><li>Ease of use - how simple it is for someone to download this thing and get
going</li><li>Time - we have 2-3 hours to make sure this thing is packaged and ready to go</li></ol><p>in that order.</p><p>We needed to pack the data, database and a node runtime to actually run the
server. Our initial idea was to use <code>docker-compose</code> with 2 services, the
database and web-server, and then the network plumbing to get it to work. After
discussing this for a few minutes, we decided that <code>docker-compose</code> may be an
off-ramp for some users as they don&#x27;t have it installed or are not familiar
with how it works. This went against our first tenet which is &#x27;ease of use&#x27;.</p><p>So we decided to take the slightly harder and hackier route of packaging the
whole thing in a single Docker container. It seemed like the best trade-off
between goals 1 and 2.</p><p>There were 6 steps to getting this thing over the line:</p><ol><li>Start with the MongoDB base image. This gives us a Linux environment and a
database.</li><li>Download and install NodeJS runtime in the container.</li><li>Download and install <code>synth</code> in the container.</li><li>Copy the javascript sources over &amp; the <code>synth</code> data model</li><li>Write a
small <a href="https://docs.docker.com/engine/reference/builder/#entrypoint" target="_blank" rel="noopener noreferrer">ENTRYPOINT</a> <a href="https://github.com/getsynth/model-repository/blob/main/shopify/start.sh" target="_blank" rel="noopener noreferrer">shell script</a>
to start the <code>mongod</code>, server and generate data into the server</li><li>Start the server and expose port 3000</li></ol><p>And we&#x27;re done! We&#x27;ve <del>hackily</del> happily packaged our mock API in a platform
agnostic one liner.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="was-it-a-success"></a>Was it a success?<a class="hash-link" href="#was-it-a-success" title="Direct link to heading">#</a></h2><p>An important aspect of this experiment was to see if we could conceive,
research, design and implement a PoC in a week (as a side project, we were
working on <code>synth</code> at the same time). I can safely say this was a
success! We got it done to spec. </p><p>An interesting thing to note is that <strong>60%</strong> of the time was spent on
ideating, researching and planning - and only 40% of the time on the actual
implementation. However, spending all that time planning before writing code
definitely saved us a bunch of time, and if we didn&#x27;t plan so much the project would have
overshot or failed.</p><p>Now if the PoC itself was a success is a different question. This is where <em>you</em>
come in. If you&#x27;re using the Event API, build the image and play around with it.</p><p>You can get started by quickly cloning
our <a href="https://github.com/getsynth/model-repository" target="_blank" rel="noopener noreferrer">git repository</a> and then:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-bash codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> shopify </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> docker build -t shopify-mock </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">.</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> docker run --rm -p </span><span class="token number" style="color:rgb(247, 140, 108)">3000</span><span class="token plain">:3000 shopify-mock</span></div></div></div><div class="buttonsBlock_1QLD"><button type="button" aria-label="Copy code to clipboard" class="codeButton_2n6w copyButton_1PCb">Copy</button></div></div></div><p>then simply:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-bash codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;localhost:3000/admin/api/2021-07/events.json&quot;</span></div></div></div><div class="buttonsBlock_1QLD"><button type="button" aria-label="Copy code to clipboard" class="codeButton_2n6w copyButton_1PCb">Copy</button></div></div></div><p>We&#x27;d like to keep iterating on the Shopify API and improve it. If there is
interest we&#x27;ll add more endpoints and improve the existing Event data model.</p><p>If you&#x27;d like to contribute, or are interested mocks for other APIs other than
Shopify, feel free to open an issue on Github!</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/synth/blog/tags/synth">synth</a><a class="margin-horiz--sm" href="/synth/blog/tags/prisma">prisma</a><a class="margin-horiz--sm" href="/synth/blog/tags/testing">testing</a><a class="margin-horiz--sm" href="/synth/blog/tags/mocking">mocking</a><a class="margin-horiz--sm" href="/synth/blog/tags/story">story</a></div><div class="col text--right"><a aria-label="Read more about So you want to mock an API" href="/synth/blog/2021/09/07/mocking-a-production-api"><strong>Read More</strong></a></div></footer></article></div></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/synth/getting_started/synth">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/synth/examples/bank">Examples</a></li><li class="footer__item"><a class="footer__link-item" href="/synth/content/null">Generators</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 OpenQuery.</div></div></div></footer></div>
<script src="/synth/styles.757b73be.js"></script>
<script src="/synth/runtime~main.b7cf6161.js"></script>
<script src="/synth/main.7611f22a.js"></script>
<script src="/synth/1.3bd11b34.js"></script>
<script src="/synth/2.26018857.js"></script>
<script src="/synth/3.64a93aa7.js"></script>
<script src="/synth/01a85c17.057161ab.js"></script>
<script src="/synth/71.5f3e08c3.js"></script>
<script src="/synth/6875c492.d1024bee.js"></script>
<script src="/synth/a6aa9e1f.91051dea.js"></script>
<script src="/synth/b4f94a6c.58d22c3c.js"></script>
<script src="/synth/ccc49370.7e7f58ec.js"></script>
<script src="/synth/5992cf76.87098209.js"></script>
<script src="/synth/85075376.fa7ea14b.js"></script>
<script src="/synth/ae4c376e.f1b28286.js"></script>
<script>window.Papercups={config:{accountId:"41ff5b3d-e2c2-42ed-bed3-ef7a6c0dde62",baseUrl:"https://app.papercups.io",greeting:"",newMessagePlaceholder:"Start typing...",primaryColor:"#00dab8",requireEmailUpfront:!1,showAgentAvailability:!1,subtitle:"Ask us anything in the chat window below ðŸ˜Š",title:"Welcome to Synth"}}</script>
<style>
              @media (max-width: 996px) {
                .Papercups-toggleButtonContainer {
                  bottom: 80px;
                }

                .Papercups-chatWindowContainer {
                  bottom: 160px;
                }
              }
            </style>
<script async defer="defer" src="https://app.papercups.io/widget.js"></script></body>
</html>